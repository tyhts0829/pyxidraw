この AGENTS.md は `src/common/` 配下に適用されます。

目的/役割
- 低レベルの共通基盤（レジストリ、キャッシュ、型、ログ）。

外部とのつながり
- 依存可: 標準ライブラリ、軽量ユーティリティ（循環を避ける）。
- 依存不可: `api/` や `engine/`、`effects/`、`shapes/` など上位層。

方針/Do
- 汎用・副作用最小。上位が使う薄いプリミティブのみ。
- `BaseRegistry` は関数/クラス両対応（Any）で統一ポリシーを提供。

Don’t
- 上位レイヤ固有の型や依存を持ち込まない。

テスト指針
- 単体（正規化、登録・取得・削除、競合時の例外）。

