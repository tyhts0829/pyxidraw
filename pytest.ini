[pytest]
# pytest設定ファイル
testpaths = tests
# src/ レイアウトの import 解決
pythonpath = src
addopts = --tb=short -v
# asyncio の将来デフォルトに備え明示指定
asyncio_default_fixture_loop_scope = function
asyncio_default_test_loop_scope = function
markers =
    smoke: minimal smoke tests that exercise the surface
    snapshot: tests that verify digest snapshots (set PXD_UPDATE_SNAPSHOTS=1 to update)
    slow: slow-running tests
    property: randomized or property-based tests
    io: runner/IO/window/MIDI reachability tests
    integration: multi-component integration tests
    e2e: end-to-end digest-based tests
    perf: non-failing performance smoke tests
    optional: tests requiring optional heavy dependencies
# 古いテストファイル/キャッシュを除外
norecursedirs = previous_design benchmarks examples .hypothesis .pytest_cache .git

# 外部ライブラリからの非推奨警告を抑制（実害なし）
filterwarnings =
    ignore:.*py23 module has been deprecated.*:DeprecationWarning:fontTools.misc.py23
