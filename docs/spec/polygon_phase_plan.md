# polygon phase 追加改善計画

## 背景と課題

- `G.polygon(n_sides=4)` をスケールすると初期配置が菱形のため、縦長/横長の長方形を作る際に回転を強制される。
- 開始角を指定できれば、菱形・水平長方形の両方を簡単に選べる。

## 進め方（チェックリスト）

- [x] 現行実装の確認: `src/shapes/polygon.py` の頂点生成/キャッシュと `Geometry.from_lines` への渡し方、呼び出し箇所を把握する。
- [x] パラメータ仕様決定: 角度単位を degree とし `phase` を追加する。既定値 0 で互換を保つ前提で、範囲は 0..360・step は 1 度とする。
- [x] 実装: `polygon` が `phase` を受け取り、ラジアン変換後に頂点を回転して `Geometry` を構成する。キャッシュは辺数のみ共有し、回転は実行時に適用する。
- [x] __param_meta__ 更新: `phase` の RangeHint と step を追加し、量子化仕様に沿う。`n_sides` との併記順も整える。
- [x] ドキュメント整備: 公開 API の docstring を更新し、必要なら `src/api/__init__.pyi` のスタブや `architecture.md`/`docs/spec/shapes` などの記述を揃える。
- [x] テスト計画/実施: 角度 0 と 45 の頂点配列差異を検証する単体テストを追加（例: 最初の頂点が x 軸上と y 軸上になること）。変更ファイルに限定した `ruff`/`black`/`isort`/`mypy` と関連 `pytest -q` を実行する。

## 確認メモ

- 命名: phase（度表記、サフィックスなし）。
- 範囲: 0..360、step: 1。
- 既定値: 0 度据え置き（互換優先）。
- ドキュメント反映: 指定なし。`docs/spec/shapes.md` を更新済み、スタブ/必要箇所はこの後整備。
