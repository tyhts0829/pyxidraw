# Parameter GUI メタデータ拡張 計画

## 目的
エフェクト/シェイプ側が公開する `__param_meta__` 等のメタデータから GUI のレンジを動的決定し、デフォルトレンジが実際の単位感覚から外れている問題を解消する。

## 実装ステップ
- [x] 参照元の整理
  - [x] `effects`/`shapes` の各関数が公開する既存メタ情報（`__param_meta__` など）を収集するユーティリティを確認
  - [x] GUI 側で利用可能な位置にメタ情報を渡す導線を把握（runtime → store → controller）
- [x] メタデータ取得
  - [x] `ParameterRuntime.before_effect_call`/`before_shape_call` で対象関数のメタ情報を取得
  - [x] メタデータに記された項目のみを優先し、未指定の場合は 0.0〜1.0 を既定レンジとして採用する
- [x] RangeHint 生成改善
  - [x] メタデータに `min`/`max`/`step` があれば `RangeHint` に反映
  - [x] キーの解釈を最小限に留め、シンプルな実装を維持する
- [x] メタデータ一覧化
  - [x] `tools/` 配下に全 shape/effect のメタデータを動的に収集し一覧出力するスクリプトを追加
  - [x] スクリプトで未設定パラメータやレンジ値を確認できるよう整形する
- [x] ストア/コントローラ連携
  - [x] 既存の `ParameterDescriptor` フィールドで対応可能か確認し、追加フィールドを避ける
  - [x] GUI 表示側が更新された `RangeHint` をそのまま利用できることを確認
- [ ] フォールバック/アップデート戦略
  - [x] メタデータ無しの場合は 0.0〜1.0 を初期レンジとし、必要に応じて既存ヒューリスティックとの整合性を検討
  - [ ] ユーザーが GUI から範囲外値を入力した際の自動拡張との整合性を検討
- [x] テスト計画
  - [x] `tests/ui/parameters/test_runtime.py` にメタデータ由来のレンジが反映されることを確認するテストを追加
  - [x] 回帰を防ぐための最小限のケース（min/max 指定あり・なし）の組み合わせを設計

## オープン質問
- メタデータ未設定の関数を把握した後、どの程度ドキュメントやチェックリストで補完を促すか？
- 0.0〜1.0 フォールバックが実運用で狭すぎる場合、どのタイミングで自動拡張を掛けるべきか？

## 観測事項
- `__param_meta__` は現状 `effects` 側では複数導入例があるが、`shapes` 側ではほとんど利用されていない。
- `architecture.md` に `__param_meta__` 仕様への言及があり、更新時には同ドキュメントの同期が必要。
- メタデータ一覧スクリプトは運用時にレンジ整理の俯瞰に利用する想定。
