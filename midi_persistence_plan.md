# MIDI 調整値永続化の改善計画

目的: MIDI コントローラーで動かしたパラメータ値を `data/gui` の永続化に含め、次回 MIDI 未接続でもその値で復帰させる。

## チェックリスト

- [x] 現状の保存/復元フローを再確認（`extract_overrides`/`save_overrides`/`load_overrides` と CC バインド適用箇所）。
- [x] 永続化方針を決定（CC バインド有りパラメータを保存対象に含める具体的な方法: 保存時に最新 CC を解決して書き出すか、Store に override として反映するか）。
- [x] 実装: 選んだ方針で CC 値を永続化に反映し、MIDI 未接続起動でも読めるようにする（NullMidi 時の挙動も考慮）。
- [x] 復元経路: `load_overrides` 適用後に GUI/ランタイムで永続化値が効くことを確認し、MIDI 接続時の優先順位（リアルタイム CC vs 永続値）を整理。
- [ ] 動作確認: 最小の動作確認手順を実施/記録（例: CC バインド付きパラメータを模擬して保存 → ファイル内容確認 →MIDI 無しで復元）。
- [ ] 必要に応じてドキュメント更新（architecture.md など）を判断し、差分を作成。

## オープン確認事項

- 保存する値は「最後に適用された CC 値」で良いか（デバイス/ポート区別は不要か）。；デバイス区別は不要。
- MIDI 再接続時の優先順位: 永続値よりリアルタイム CC を即座に優先する運用で問題ないか。；はい
