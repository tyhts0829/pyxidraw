# extrude: ゼロ方向時はスケールのみ適用（改善チェックリスト）

目的: `direction=(0,0,0)` または実質ゼロの場合でも、押し出しは行わずスケールのみ効かせる。NaN 汚染や描画消失を防ぐ。

- [x] ゼロ割防止ガードを追加（‖direction‖<1e-9 または distance=0 → `extrude_vec=(0,0,0)`）。
- [x] スケール処理はそのまま実行（中心モード `auto/origin` 既存仕様を維持）。
- [x] 退化接続エッジ（原点と複製点が同一）の追加を抑止し、シェーダの `normalize` 不定挙動を回避。
- [x] docstring/コメントに「ゼロ方向はスケールのみ適用」を明記。
- [x] 変更ファイルに限定して `ruff`/`black`/`isort`/`mypy` を通す。

メモ:
- 方向ゼロでも `scale!=1` の場合は接続エッジは生成される（頂点位置が一致しないため）。`scale==1` かつ `distance==0` の場合のみ接続エッジが消えるのは仕様とする。
